<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Dashboard - SMM Panel</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/api-styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- PWA Configuration -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ff1494">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BOTZZZ773 Pro">

    <!-- Icons for iOS -->
    <link rel="apple-touch-icon" sizes="72x72" href="/img/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="/img/icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="128x128" href="/img/icons/icon-128x128.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/img/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/img/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/img/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="384x384" href="/img/icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/img/icons/icon-512x512.png">

</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <a href="index.html" class="logo">
                    <span class="logo-text">BOTZZZ<span class="logo-highlight">773</span></span>
                </a>
                <button class="mobile-toggle" id="mobileToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav-menu" id="navMenu">
                    <li><a href="index.html" class="nav-link">Home</a></li>
                    <li><a href="services.html" class="nav-link">Services</a></li>
                    <li><a href="order.html" class="nav-link">Order Now</a></li>
                    <li><a href="addfunds.html" class="nav-link">Add Funds</a></li>
                    <li><a href="api.html" class="nav-link">API</a></li>
                    <li><a href="api-dashboard.html" class="nav-link active">API Dashboard</a></li>
                    <li><a href="tickets.html" class="nav-link">Tickets</a></li>
                    <li><a href="contact.html" class="nav-link">Contact</a></li>
                    <!-- Auth navigation dynamically updated by main.js -->
                    <li id="authNavItem"><a href="signin.html" class="nav-link btn-primary">Sign In</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- API Dashboard -->
    <section class="api-dashboard-section">
        <div class="container">
            <div class="dashboard-header">
                <h1>API Dashboard</h1>
                <p>Manage your API keys, view usage statistics, and integrate providers</p>
            </div>

            <!-- Quick Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="totalRequests">0</span>
                        <span class="stat-label">API Requests</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="totalOrders">0</span>
                        <span class="stat-label">Orders Placed</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="activeProviders">0</span>
                        <span class="stat-label">Active Providers</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="1" x2="12" y2="23"/>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="totalSpent">$0.00</span>
                        <span class="stat-label">Total Spent</span>
                    </div>
                </div>
            </div>

            <!-- API Keys Section -->
            <div class="dashboard-section">
                <div class="section-header-row">
                    <h2>Your API Keys</h2>
                    <button class="btn-primary" id="generateKeyBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        Generate New Key
                    </button>
                </div>

                <div id="apiKeysList" class="api-keys-list">
                    <!-- API Keys will be populated here -->
                    <div class="empty-state">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        <h3>No API Keys Yet</h3>
                        <p>Generate your first API key to start integrating our services</p>
                        <button class="btn-primary" onclick="document.getElementById('generateKeyBtn').click()">Generate API Key</button>
                    </div>
                </div>
            </div>

            <!-- Provider Integration Section -->
            <div class="dashboard-section">
                <div class="section-header-row">
                    <h2>Provider Integration</h2>
                    <button class="btn-primary" id="addProviderBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        Add Provider
                    </button>
                </div>

                <div class="provider-info-banner">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="16" x2="12" y2="12"/>
                        <line x1="12" y1="8" x2="12.01" y2="8"/>
                    </svg>
                    <div>
                        <h4>Connect External SMM Providers</h4>
                        <p>Add provider API keys to import their services and fulfill orders automatically. All imported services will be available to your clients with your custom pricing.</p>
                    </div>
                </div>

                <div id="providersList" class="providers-list">
                    <!-- Providers will be populated here -->
                    <div class="empty-state">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                        <h3>No Providers Connected</h3>
                        <p>Add your first provider to import services and automate order fulfillment</p>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="dashboard-section">
                <h2>Recent API Activity</h2>
                <div class="activity-table">
                    <div class="table-header">
                        <div>Timestamp</div>
                        <div>Action</div>
                        <div>Status</div>
                        <div>Details</div>
                    </div>
                    <div id="activityList" class="table-body">
                        <div class="empty-state">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                            </svg>
                            <p>No recent activity</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Add Provider Modal -->
    <div id="addProviderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Provider</h3>
                <button class="modal-close" onclick="closeModal('addProviderModal')">&times;</button>
            </div>
            <form id="addProviderForm" class="modal-body">
                <div class="form-group">
                    <label for="providerName">Provider Name *</label>
                    <input type="text" id="providerName" placeholder="e.g., g1618.com, MainSMM" required>
                    <span class="form-hint">Give this provider a recognizable name</span>
                </div>

                <div class="form-group">
                    <label for="providerApiKey">API Key *</label>
                    <input type="text" id="providerApiKey" placeholder="2ea09ee801c709411af403" required>
                    <span class="form-hint">Your API key from the provider's dashboard</span>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('addProviderModal')">Cancel</button>
                    <button type="submit" class="btn-primary">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        <span>Add Provider</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Generate API Key Modal -->
    <div id="generateKeyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Generate New API Key</h3>
                <button class="modal-close" onclick="closeModal('generateKeyModal')">&times;</button>
            </div>
            <form id="generateKeyForm" class="modal-body">
                <div class="form-group">
                    <label for="keyName">Key Name</label>
                    <input type="text" id="keyName" placeholder="e.g., Production, Testing, Mobile App" required>
                    <span class="form-hint">Give this key a descriptive name for easy identification</span>
                </div>

                <div class="form-group">
                    <label for="keyPermissions">Permissions</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" value="services" checked>
                            <span>View Services</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="orders" checked>
                            <span>Create Orders</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="balance" checked>
                            <span>Check Balance</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="refill" checked>
                            <span>Request Refills</span>
                        </label>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('generateKeyModal')">Cancel</button>
                    <button type="submit" class="btn-primary">Generate API Key</button>
                </div>
            </form>
        </div>
    </div>

    <!-- API Key Details Modal -->
    <div id="apiKeyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>API Key Generated Successfully</h3>
                <button class="modal-close" onclick="closeModal('apiKeyModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="success-icon">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                </div>
                <h4>Your API Key</h4>
                <p class="warning-text">⚠️ Save this key securely. You won't be able to see it again!</p>
                <div class="api-key-display">
                    <code id="generatedApiKey">xxxxxx-xxxxxx-xxxxxx-xxxxxx</code>
                    <button class="copy-btn-inline" onclick="copyApiKey()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="modal-actions">
                    <button class="btn-primary" onclick="closeModal('apiKeyModal')">Done</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Provider Success Modal -->
    <div id="providerSuccessModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Provider Added Successfully</h3>
                <button class="modal-close" onclick="closeModal('providerSuccessModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="success-icon">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                </div>
                <h4 id="providerSuccessTitle">Provider Connected</h4>
                <div class="import-stats">
                    <div class="import-stat">
                        <span class="import-stat-value" id="importedServicesCount">0</span>
                        <span class="import-stat-label">Services Imported</span>
                    </div>
                    <div class="import-stat">
                        <span class="import-stat-value" id="importedCategoriesCount">0</span>
                        <span class="import-stat-label">Categories</span>
                    </div>
                </div>
                <p>All services have been imported and are now available in your panel with your custom pricing.</p>
                <div class="modal-actions">
                    <button class="btn-secondary" onclick="closeModal('providerSuccessModal')">Close</button>
                    <button class="btn-primary" onclick="window.location.href='services.html'">View Services</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>BOTZZZ<span>773</span></h3>
                    <p>The fastest and most reliable SMM panel with premium quality services at affordable prices.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="services.html">Services</a></li>
                        <li><a href="api.html">API Docs</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="#faq">FAQ</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 BOTZZZ773 SMM Panel. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Security Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

    <script src="js/main.js"></script>
    <script>
        // Authentication check - redirect if not logged in
        (function() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            
            if (!token || !user) {
                alert('You must be signed in to access the API Dashboard');
                window.location.href = 'signin.html';
            }
        })();
    </script>
    <script src="js/api-dashboard.js"></script>
    <!-- PWA Registration -->
    <script src="/js/pwa.js"></script>

</body>
</html>
