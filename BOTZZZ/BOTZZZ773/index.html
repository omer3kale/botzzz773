<script>
// Servisleri API'den çek ve ekrana bas
async function loadServices() {
    const container = document.getElementById('servicesContainer');
    container.innerHTML = 'Loading...';

    try {
        const response = await fetch('/.netlify/functions/services', {
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${localStorage.getItem('token') || ''}`
            }
        });

        const result = await response.json();
        const services = result.services || [];

        if (!services.length) {
            container.innerHTML = '<p>No services found.</p>';
            return;
        }

        container.innerHTML = ''; // Temizle
        services.forEach(service => {
            const card = document.createElement('div');
            card.className = 'service-card';

            card.innerHTML = `
                <h3 class="service-title">${service.name}</h3>
                <p class="service-desc">${service.description || ''}</p>
                <p class="service-category">Category: ${service.category}</p>
                <p class="service-id">Site ID: <strong>${service.site_id}</strong></p>
                <p class="service-rate">Price: $${service.rate}</p>
            `;

            container.appendChild(card);
        });
    } catch (err) {
        console.error('Error loading services:', err);
        container.innerHTML = '<p>Error loading services.</p>';
    }
}

// Sayfa yüklendiğinde servisleri çek
document.addEventListener('DOMContentLoaded', loadServices);
</script>



