<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - BOTZZZ773</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/auth-styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Google Sign-In -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- PWA Configuration -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ff1494">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BOTZZZ773 Pro">

    <!-- Icons for iOS -->
    <link rel="apple-touch-icon" sizes="72x72" href="/img/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="/img/icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="128x128" href="/img/icons/icon-128x128.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/img/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/img/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/img/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="384x384" href="/img/icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/img/icons/icon-512x512.png">

</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <a href="index.html" class="logo">
                    <span class="logo-text">BOTZZZ<span class="logo-highlight">773</span></span>
                </a>
                <button class="mobile-toggle" id="mobileToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav-menu" id="navMenu">
                    <li><a href="index.html" class="nav-link">Home</a></li>
                    <li><a href="services.html" class="nav-link">Services</a></li>
                    <li><a href="order.html" class="nav-link">Order Now</a></li>
                    <li><a href="addfunds.html" class="nav-link">Add Funds</a></li>
                    <li><a href="api.html" class="nav-link">API</a></li>
                    <li><a href="tickets.html" class="nav-link">Tickets</a></li>
                    <li><a href="contact.html" class="nav-link">Contact</a></li>
                </ul>
                <div class="nav-auth-controls">
                    <div class="auth-buttons">
                        <a href="signin.html" class="btn btn-outline">Sign In</a>
                        <a href="signup.html" class="btn btn-primary">Sign Up</a>
                    </div>
                    <div class="user-menu" style="display: none;">
                        <button class="user-menu-btn" type="button">
                            <span class="username">Account</span>
                            <span class="balance">$0.00</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="user-dropdown">
                            <a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a>
                            <a href="addfunds.html"><i class="fas fa-wallet"></i> Add Funds</a>
                            <a href="tickets.html"><i class="fas fa-ticket-alt"></i> Tickets</a>
                            <a href="#" onclick="handleLogout(); return false;"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Auth Section -->
    <section class="auth-section">
        <div class="container">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <h1>Create Account</h1>
                        <p>Join BOTZZZ773 and start boosting your social media</p>
                    </div>

                    <form id="signupForm" class="auth-form">
                        <div class="form-group">
                            <label for="fullname">Full Name</label>
                            <input 
                                type="text" 
                                id="fullname" 
                                name="fullname" 
                                placeholder="John Doe" 
                                required
                                autocomplete="name"
                            >
                        </div>

                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input 
                                type="email" 
                                id="email" 
                                name="email" 
                                placeholder="your@email.com" 
                                required
                                autocomplete="email"
                            >
                        </div>

                        <div class="form-group">
                            <label for="username">Username</label>
                            <input 
                                type="text" 
                                id="username" 
                                name="username" 
                                placeholder="Choose a username" 
                                required
                                autocomplete="username"
                                minlength="3"
                                maxlength="50"
                            >
                            <small class="form-hint">Unique username for your account</small>
                        </div>

                        <div class="form-group">
                            <label for="password">Password</label>
                            <div class="password-input">
                                <input 
                                    type="password" 
                                    id="password" 
                                    name="password" 
                                    placeholder="Create a strong password" 
                                    required
                                    autocomplete="new-password"
                                    minlength="8"
                                >
                                <button type="button" class="toggle-password" onclick="togglePassword()">
                                    <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                </button>
                            </div>
                            <small class="password-hint">Minimum 8 characters</small>
                        </div>

                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <div class="password-input">
                                <input 
                                    type="password" 
                                    id="confirmPassword" 
                                    name="confirmPassword" 
                                    placeholder="Re-enter your password" 
                                    required
                                    autocomplete="new-password"
                                    minlength="8"
                                >
                                <button type="button" class="toggle-password toggle-confirm-password" onclick="toggleConfirmPassword()">
                                    <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <div class="form-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                                <span>I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></span>
                            </label>
                        </div>

                        <button type="submit" class="btn-submit">Create Account</button>
                    </form>

                    <div class="auth-divider">
                        <span>or</span>
                    </div>

                    <div class="social-auth">
                        <!-- Google Sign-Up Button -->
                        <div id="g_id_onload"
                             data-client_id="330182310617-douv2oleom0f2f9ak27qhh5t6om5tu06.apps.googleusercontent.com"
                             data-context="signup"
                             data-ux_mode="popup"
                             data-callback="handleGoogleSignUp"
                             data-auto_prompt="false">
                        </div>
                        
                        <div class="g_id_signin" 
                             data-type="standard"
                             data-shape="rectangular"
                             data-theme="filled_black"
                             data-text="signup_with"
                             data-size="large"
                             data-logo_alignment="left"
                             data-width="100%">
                        </div>
                    </div>

                    <div class="auth-footer">
                        <p>Already have an account? <a href="signin.html">Sign In</a></p>
                    </div>
                </div>

                <!-- Features Side Panel -->
                <div class="auth-features">
                    <h2>Get Started in Minutes</h2>
                    <div class="features-list">
                        <div class="feature-item">
                            <div class="feature-number">1</div>
                            <div class="feature-content">
                                <h3>Create Your Account</h3>
                                <p>Quick and easy registration process</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-number">2</div>
                            <div class="feature-content">
                                <h3>Add Funds</h3>
                                <p>Secure payment with multiple options</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-number">3</div>
                            <div class="feature-content">
                                <h3>Place Your Order</h3>
                                <p>Choose from 100+ services</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-number">4</div>
                            <div class="feature-content">
                                <h3>Watch It Grow</h3>
                                <p>Track your order in real-time</p>
                            </div>
                        </div>
                    </div>

                    <div class="promo-banner">
                        <h3>ðŸŽ‰ Welcome Bonus</h3>
                        <p>Get <strong>$5 free credits</strong> on your first deposit!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>BOTZZZ<span>773</span></h3>
                    <p>Your trusted SMM panel provider for all social media marketing needs.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="services.html">Services</a></li>
                        <li><a href="order.html">Order Now</a></li>
                        <li><a href="api.html">API</a></li>
                        <li><a href="tickets.html">Support</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="tickets.html">Tickets</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect</h4>
                    <div class="social-links">
                        <a href="#">Instagram</a>
                        <a href="#">Twitter</a>
                        <a href="#">Facebook</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 BOTZZZ773. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- API Client -->
    <script src="js/api-client.js"></script>
    <script src="js/main.js"></script>
    <script src="js/auth-backend.js"></script>
    <script>
        // Google Sign-Up Handler
        function handleGoogleSignUp(response) {
            console.log('Google Sign-Up response:', response);
            
            // Decode the JWT token
            const credential = response.credential;
            const payload = JSON.parse(atob(credential.split('.')[1]));
            
            console.log('Google user data:', payload);
            
            // Send to backend to create user
            fetch('/.netlify/functions/auth', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    action: 'google-signup',
                    credential: credential,
                    email: payload.email,
                    name: payload.name,
                    picture: payload.picture
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Backend response:', data);
                if (data.success) {
                    // Store token with consistent key name
                    localStorage.setItem('token', data.token);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    
                    // Show success message
                    console.log('Google Sign-Up successful!');
                    
                    // Role-based redirection
                    if (data.user.role === 'admin') {
                        window.location.href = '/admin/index.html';
                    } else {
                        window.location.href = '/dashboard.html';
                    }
                } else {
                    alert(data.error || 'Google Sign-Up failed. Please try again.');
                }
            })
            .catch(error => {
                console.error('Google Sign-Up error:', error);
                alert('An error occurred during Google Sign-Up. Please try again.');
            });
        }
        
        // Password toggle function
        function togglePassword(inputId) {
            const passwordInput = document.getElementById(inputId);
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;
        }
    </script>
    <!-- PWA Registration -->
    <script src="/js/pwa.js"></script>

</body>
</html>
